<!DOCTYPE html>

<html>

<head>
  <title>Practical JavaScript</title>
</head>

<body>
  <!--HTML GOES HERE ðŸ‘‡-->

  <h1>Todo List</h1>

  <!-- <button id="displayTodosButton">Display Todos</button>
  <button id="toggleAllButton">Toggle All</button> -->

  <div>
    <!-- <button onclick="handlers.displayTodos()">Display Todos</button> -->
    <button onclick="handlers.toggleAll()">Select All</button>
  </div>

  <div>
    <button onclick="handlers.addTodo()">Add</button>
    <input id="addTodoTextInput" type="text">
  </div>

  <div>
    <button onclick="handlers.changeTodo()">Edit</button>
    <input id="changeTodoPositionInput" type="number">
    <input id="changeTodoTextInput" type="text">
  </div>

  <!-- <button onclick="handlers.deleteTodo()">Delete</button>
  <input id="deleteTodoButton" type="number">
  </div> -->

  <div>
    <button onclick="handlers.toggleCompleted()">Mark As Done</button><input id="toggleCompletedPositionInput"
      type="number">
  </div>

  <ul>
  </ul>


  <script>
    // JAVASCRIPT GOES HERE ðŸ‘‡

    /* Version 3: Objects and Methods
    var todoList =
    {
      todos: [ 'item 1', 'item 2', 'item 3' ],
      displayTodos: function ()
      {
        console.log("My Todos:", this.todos);
      },
      addTodo: function (todo)
      {
        this.todos.push(todo);
        this.displayTodos();
      },
      changeTodo: function (position, newValue)
      {
        this.todos[ position ] = newValue;
        this.displayTodos();
      },
      deleteTodo: function (position)
      {
        this.todos.splice(position, 1);
        this.displayTodos();
      }
    } */

    // Version 4: Booleans and Objects
    // var todoList =
    // {
    //   todos: [],
    //   displayTodos: function ()
    //   {
    //     console.log("My Todos:", this.todos);
    //   },
    //   addTodo: function (todoText)
    //   {
    //     this.todos.push({ // this is the object being added to the todo list. 
    //       todoText: todoText,
    //       completed: false
    //     });
    //     this.displayTodos();
    //   },
    //   changeTodo: function (position, todoText)
    //   {
    //     this.todos[ position ].todoText = todoText;
    //     this.displayTodos();
    //   },
    //   deleteTodo: function (position)
    //   {
    //     this.todos.splice(position, 1);
    //     this.displayTodos();
    //   },
    //   toggleCompleted: function (position)
    //   {// It needs a position so that we know which todo you wanna modify/toggle.
    //     var todo = this.todos[ position ];
    //     todo.completed = !todo.completed;
    //     this.displayTodos();
    //   }
    // };

    //Version 5: Loops of logic & Arrays
    //1. for loop

    // var testArray = [ 'item 1', 'item 2', 'item 3', 'item 4' ];

    // for (let i = 0; i < testArray.length; i++)
    // {
    //   //console.log(i);
    //   console.log(testArray[ i ]);
    // }

    // var todoList =
    // {
    //   todos: [],
    //   displayTodos: function ()
    //   {
    //     if (this.todos.length === 0)
    //     {
    //       console.log("Your Todo's List is empty!");
    //     } else
    //     {
    //       console.log("My Todo's: ");
    //       for (let i = 0; i < this.todos.length; i++)
    //       {
    //         if (this.todos[ i ].completed === true)
    //         {
    //           console.log('(x)', this.todos[ i ].todoText);
    //         } else
    //         {
    //           console.log('( )', this.todos[ i ].todoText);
    //         }
    //       }
    //     }
    //   },

    //   addTodo: function (todoText)
    //   {
    //     this.todos.push({ // this is the object being added to the todo list. 
    //       todoText: todoText,
    //       completed: false
    //     });
    //     this.displayTodos();
    //   },
    //   changeTodo: function (position, todoText)
    //   {
    //     this.todos[ position ].todoText = todoText;
    //     this.displayTodos();
    //   },
    //   deleteTodo: function (position)
    //   {
    //     this.todos.splice(position, 1);
    //     this.displayTodos();
    //   },
    //   toggleCompleted: function (position)
    //   {// It needs a position so that we know which todo you wanna modify/toggle.
    //     var todo = this.todos[ position ];
    //     todo.completed = !todo.completed;
    //     this.displayTodos();
    //   }
    // };

    //Version 6: Thinking in Code

    var todoList =
    {
      todos: [],
      // displayTodos: function ()
      // {
      //   if (this.todos.length === 0)
      //   {
      //     console.log("Your Todo's List is empty!");
      //   } else
      //   {
      //     console.log("My Todo's: ");
      //     for (let i = 0; i < this.todos.length; i++)
      //     {
      //       if (this.todos[ i ].completed === true)
      //       {
      //         console.log('(x)', this.todos[ i ].todoText);
      //       } else
      //       {
      //         console.log('( )', this.todos[ i ].todoText);
      //       }
      //     }
      //   }
      // },

      addTodo: function (todoText)
      {
        if (todoText === "")
        {
          //do nothing
        } else
          this.todos.push({ // this is the object being added to the todo list. 
            todoText: todoText,
            completed: false
          });
        // this.displayTodos();
      },

      changeTodo: function (position, todoText)
      {
        this.todos[ position ].todoText = todoText;
        // this.displayTodos();
      },

      deleteTodo: function (position)
      {
        this.todos.splice(position, 1);
        // this.displayTodos();
      },

      toggleCompleted: function (position)
      {// It needs a position so that we know which todo you wanna modify/toggle.
        var todo = this.todos[ position ];
        todo.completed = !todo.completed;
        // this.displayTodos();
      },

      //   toggleAll: function ()
      //   {
      //     var totalTodos = this.todos.length;
      //     var completedTodos = 0;

      //     // Get number of completed todos
      //     for (var i = 0; i < totalTodos; i++)
      //     {
      //       if (this.todos[ i ].completed === true)
      //       {
      //         completedTodos++;
      //       }
      //     }
      //     //1. if (everything is true) //{make everything false}
      //     if (completedTodos === totalTodos)
      //     {
      //       for (var i = 0; i < totalTodos; i++)
      //       {
      //         this.todos[ i ].completed = false;
      //       }
      //       //2. else{make everything true};
      //     } else
      //     {
      //       for (var i = 0; i < totalTodos; i++)
      //       {
      //         this.todos[ i ].completed = true;
      //       }
      //     }

      //     // this.displayTodos();
      //   }
      // },
      // Version 11: Destroy all for loops with forEach()
      toggleAll: function ()
      {
        var totalTodos = this.todos.length;
        var completedTodos = 0;

        // // Get number of completed todos
        this.todos.forEach(function (todo)
        {
          if (todo.completed === true)
          {
            completedTodos++;
          }
        })
        //1. if (everything is true) //{make everything false}
        // if (completedTodos === totalTodos)
        //   this.todos.forEach(function (todo)
        //   {
        //     todo.completed = false;
        //   })
        // //2. else{make everything true};
        // else
        // {
        //   this.todos.forEach(function (todo)
        //   {
        //     todo.completed = true;
        //   });
        // }
        this.todos.forEach(function (todo)
        {
          if (completedTodos === totalTodos)
          {
            todo.completed = false;
          } else
          {
            todo.completed = true;
          }
        })
      }
    };


    // I. Clicking "Display todos" should run todoList.displayTodos
    // 1. HTML: Code in button element for "Display todo" with id "displayTodosButton". 
    // 1. We want to get access to the display todos button. HTML: Give button an id for JS to reference. // To access button: We must reference the document keyword, represents the DOM, an object, to call an element like "button". The document (object of the browser, the browser window, what we see on a browser is the document object) has methods that allows us to select specific elements/nodes in our html code and do stuff to them, or modify them. Methods: (.getElementById, .getElementsByClassName, .getElementsByTagName - jQuery: ('#'), ('.'), (tag name) ) To select elements: (id, class, tag name) attributes/descriptions (Attributes: give elements additional information that it might need for a purpose):

    // var displayTodosButton = document.getElementById('displayTodosButton');
    // //console.log(displayTodosButton); // We log to test that its working and it shows us on the console that it got the element we requested.


    // // 2. We want to run displayTodos method, when someone (.addEventListener) clicks the "Display todos" button. We want to grab the button and add an event listener to it connecting the button through dot notation to the document method .addEventListener, which is a function that takes two parameters, (event, and function(){}). In this case the event is 'click', and the function is displayTodos:  

    // displayTodosButton.addEventListener('click', function ()
    // {
    //   todoList.displayTodos();
    // });

    // //II. "Toggle all" button should run todolist.toggleAll (repeat I'st structure and process):

    // var toggleAllButton = document.getElementById('toggleAllButton');

    // toggleAllButton.addEventListener('click', function ()
    // {
    //   todoList.toggleAll();
    // });

    // // Version 8: Getting data form Inputs

    // var handlers = {
    //   displayTodos: function ()
    //   {
    //     todoList.displayTodos();
    //   },

    //   addTodo: function ()
    //   {
    //     var addTodoTextInput = document.getElementById('addTodoTextInput');
    //     {
    //       todoList.addTodo(addTodoTextInput.value);
    //       addTodoTextInput.value = "";
    //     }
    //   },

    //   changeTodo: function ()
    //   {
    //     var changeTodoPositionInput = document.getElementById('changeTodoPositionInput');
    //     var changeTodoTextInput = document.getElementById('changeTodoTextInput');
    //     todoList.changeTodo(changeTodoPositionInput.valueAsNumber, changeTodoTextInput.value);
    //     changeTodoPositionInput.value = "";
    //     changeTodoTextInput.value = "";
    //   },

    //   deleteTodo: function ()
    //   {
    //     var deleteTodoButton = document.getElementById('deleteTodoButton');
    //     todoList.deleteTodo(deleteTodoButton.valueAsNumber);
    //     deleteTodoButton.value = "";
    //   },

    //   toggleCompleted: function ()
    //   {
    //     var toggleCompletedPositionInput = document.getElementById('toggleCompletedPositionInput');
    //     todoList.toggleCompleted(toggleCompletedPositionInput.valueAsNumber);
    //     toggleCompletedPositionInput.value = "";
    //   },

    //   toggleAll: function ()
    //   {
    //     todoList.toggleAll();
    //   }


    // };

    // Version 9: Escaping from the Console

    var handlers = {
      displayTodos: function ()
      {
        todoList.displayTodos();
      },

      addTodo: function ()
      {
        var addTodoTextInput = document.getElementById('addTodoTextInput');
        todoList.addTodo(addTodoTextInput.value);
        addTodoTextInput.value = "";
        view.displayTodos();
      },

      changeTodo: function ()
      {
        var changeTodoPositionInput = document.getElementById('changeTodoPositionInput');
        var changeTodoTextInput = document.getElementById('changeTodoTextInput');
        todoList.changeTodo(changeTodoPositionInput.valueAsNumber, changeTodoTextInput.value);
        changeTodoPositionInput.value = "";
        changeTodoTextInput.value = "";
        view.displayTodos();
      },

      deleteTodo: function (position)
      {
        // //var deleteTodoPositionInput = document.getElementById('deleteTodoPositionInput');
        // todoList.deleteTodo(deleteTodoPositionInput.valueAsNumber);
        // //deleteTodoPositionInput.value = "";
        // view.displayTodos();

        todoList.deleteTodo(position);
        view.displayTodos();
      },

      toggleCompleted: function ()
      {
        var toggleCompletedPositionInput = document.getElementById('toggleCompletedPositionInput');
        todoList.toggleCompleted(toggleCompletedPositionInput.valueAsNumber);
        toggleCompletedPositionInput.value = "";
        view.displayTodos();
      },

      toggleAll: function ()
      {
        todoList.toggleAll();
        view.displayTodos();
      },

    };

    var view = {

      displayTodos: function ()
      {
        // var todosUl = document.querySelector('ul');
        // todosUl.innerHTML = "";
        // for (let i = 0; i < todoList.todos.length; i++)
        // {
        //   var todoLi = document.createElement('li');
        //   var todo = todoList.todos[ i ];
        //   // "(x) todoText": Create a new variable to store this string template.
        //   var todoTextWithCompletion = "";
        //   // This variable is going to change depending on if the completed property is true or false
        //   if (todo.completed === true)
        //   {
        //     todoTextWithCompletion = "(x) " + todo.todoText;
        //   } else
        //   {
        //     todoTextWithCompletion = "(  ) " + todo.todoText;
        //   };

        //   todoLi.id = i;
        //   todoLi.textContent = todoTextWithCompletion;
        //   todoLi.appendChild(this.createDeleteButton());
        //   todosUl.appendChild(todoLi);
        // }

        // this // refers to view object
        // forEach(callback, this);

        var todosUl = document.querySelector('ul');
        todosUl.innerHTML = "";

        todoList.todos.forEach(function (todo, position)
        {
          var todoLi = document.createElement('li');
          // "(x) todoText": Create a new variable to store this string template.
          var todoTextWithCompletion = "";
          // This variable is going to change depending on if the completed property is true or false
          if (todo.completed === true)
          {
            todoTextWithCompletion = "(x) " + todo.todoText;
          } else
          {
            todoTextWithCompletion = "(  ) " + todo.todoText;
          }

          todoLi.id = position;
          todoLi.textContent = todoTextWithCompletion;
          todoLi.appendChild(this.createDeleteButton());
          todosUl.appendChild(todoLi);
        }, this);
      },

      createDeleteButton: function ()
      {
        var deleteButton = document.createElement('button');
        deleteButton.textContent = 'Delete';
        deleteButton.className = 'deleteButton';
        return deleteButton;
      },

      setUpEventListeners: function ()
      {
        var todosUl = document.querySelector('ul');

        todosUl.addEventListener('click', function (event)
        {
          //console.log(event.target.parentNode.id);
          // Get the element that was clicked on
          var elementClicked = event.target;

          // check "if" elementClicked is a delete button, because there are a lot element you can use to click
          if (elementClicked.className === 'deleteButton')
          {
            // Run handlers.deleteTodo(position)
            handlers.deleteTodo(parseInt(elementClicked.parentNode.id));
          }
        });
      }

    };

    view.setUpEventListeners();

  </script>
</body>

</html>